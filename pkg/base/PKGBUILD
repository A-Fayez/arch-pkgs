# Maintainer: Michael Daffin <michael@daffin.io>
pkgname=mdaffin-base
pkgver=0.0.8
pkgrel=1
pkgdesc="Base system configuration for mdaffin systems"
arch=('any')
url="https://github.com/mdaffin/mdaffin-arch-repo"
license=('MIT')
groups=('mdaffin')
install=mdaffin-base.install
provides=(
    'vim'
    'vi'
)
conflicts=(
    'vim'
    'vi'
)
depends=(
    'sudo'
    'neovim'
    'ripgrep'
    'exa'
    'fd-rs'
    'exfat-utils'
    'avahi'
    'nss-mdns'
    'python-neovim'
    'python2-neovim'
    'zsh'
    'grml-zsh-config'
    'tmux'
    'htop'
    'iotop'
    'openssh'
    'lsof'
    'wget'
    'f2fs-tools'
    'bash'
    'bzip2'
    'coreutils'
    'cryptsetup'
    'device-mapper'
    'dhcpcd'
    'diffutils'
    'file'
    'filesystem'
    'findutils'
    'gawk'
    'gcc-libs'
    'gettext'
    'glibc'
    'grep'
    'gzip'
    'inetutils'
    'iproute2'
    'iputils'
    'less'
    'licenses'
    'linux'
    'logrotate'
    'man-db'
    'man-pages'
    'mdadm'
    'pacman'
    'pciutils'
    'pcmciautils'
    'perl'
    'procps-ng'
    'psmisc'
    's-nail'
    'sed'
    'shadow'
    'sysfsutils'
    'systemd-sysvcompat'
    'tar'
    'texinfo'
    'usbutils'
    'util-linux'
    'which'
)
source=('vconsole.conf'
        'sudoers.wheel'
        'mdaffin-base.sh')
md5sums=('12733d28ff3b5352ea1c3d84b27cd6bd'
         '52719e50fbbea8255275964ba70aa0a7'
         '9463e8e19ee914684f7bd5190243aa3f')

package() {
    # TODO 'mdns_minimal [NOTFOUND=return] resolve' in /etc/nsswitch.conf
    install -dm 0755 "$pkgdir/usr/bin"
    ln -s /usr/bin/nvim "$pkgdir/usr/bin/vim"
    ln -s /usr/bin/nvim "$pkgdir/usr/bin/vi"
    install -Dm 0644 vconsole.conf "$pkgdir/etc/vconsole.conf"
    install -Dm 0640 sudoers.wheel "$pkgdir/etc/sudoers.d/wheel"
    install -Dm 0755 mdaffin-base.sh "$pkgdir/etc/profile.d/mdaffin-base.sh"
}
